\subsubsection{Register allocation and coalescing}

register allocation use linear scan method:\par
(a) Analyze liveness in function, for input and output find live in and live out.\par
(b) Insert spill and reload code, push to worklist\par
(c) Rewrite the virtual register for the target register.

register coalescing pile line:

(a) Foreach the movrr MCInst at basicblock of function on the module.\par
(b) If two register is the same, then push them into the worklist.\par
(c) Remove the inst in the worklist from the function.\par